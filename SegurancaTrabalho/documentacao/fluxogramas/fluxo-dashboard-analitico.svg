<svg width="1000" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .box { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2; }
      .decision { fill: #fff3e0; stroke: #f57c00; stroke-width: 2; }
      .process { fill: #e8f5e8; stroke: #388e3c; stroke-width: 2; }
      .data { fill: #fce4ec; stroke: #c2185b; stroke-width: 2; }
      .chart { fill: #e8eaf6; stroke: #3f51b5; stroke-width: 2; }
      .query { fill: #fff3e0; stroke: #ff6f00; stroke-width: 2; }
      .text { font-family: Arial, sans-serif; font-size: 11px; text-anchor: middle; }
      .title { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; text-anchor: middle; }
      .arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>
  
  <!-- Título -->
  <text x="500" y="30" class="title">Fluxograma - Dashboard Analítico</text>
  
  <!-- Início -->
  <ellipse cx="500" cy="70" rx="70" ry="25" class="box" />
  <text x="500" y="75" class="text">Usuário Acessa Dashboard</text>
  
  <!-- Controller -->
  <rect x="430" y="120" width="140" height="40" class="process" />
  <text x="500" y="145" class="text">DashboardController@index</text>
  
  <!-- Consultas Paralelas -->
  <text x="500" y="200" class="text" style="font-size: 12px; font-weight: bold;">Consultas Agregadas Paralelas</text>
  
  <!-- Query 1: Exames Mensais -->
  <rect x="100" y="230" width="150" height="50" class="query" />
  <text x="175" y="250" class="text">Exames por Mês</text>
  <text x="175" y="265" class="text" style="font-size: 9px;">GROUP BY MONTH(data_atendimento)</text>
  
  <!-- Query 2: Tipos de Exame -->
  <rect x="280" y="230" width="150" height="50" class="query" />
  <text x="355" y="250" class="text">Tipos de Exame</text>
  <text x="355" y="265" class="text" style="font-size: 9px;">GROUP BY tipo_exame</text>
  
  <!-- Query 3: Por Empresa -->
  <rect x="460" y="230" width="150" height="50" class="query" />
  <text x="535" y="250" class="text">Por Empresa</text>
  <text x="535" y="265" class="text" style="font-size: 9px;">JOIN empresas GROUP BY empresa_id</text>
  
  <!-- Query 4: Estatísticas Gerais -->
  <rect x="640" y="230" width="150" height="50" class="query" />
  <text x="715" y="250" class="text">Estatísticas Gerais</text>
  <text x="715" y="265" class="text" style="font-size: 9px;">COUNT, AVG, SUM</text>
  
  <!-- Processamento de Dados -->
  <rect x="430" y="320" width="140" height="40" class="process" />
  <text x="500" y="345" class="text">Processamento de Dados</text>
  
  <!-- Formatação para Gráficos -->
  <rect x="430" y="390" width="140" height="40" class="process" />
  <text x="500" y="415" class="text">Formatação para Charts.js</text>
  
  <!-- View Blade -->
  <rect x="430" y="460" width="140" height="40" class="data" />
  <text x="500" y="485" class="text">dashboard.blade.php</text>
  
  <!-- JavaScript Charts -->
  <text x="500" y="540" class="text" style="font-size: 12px; font-weight: bold;">Renderização de Gráficos</text>
  
  <!-- Chart 1 -->
  <rect x="150" y="570" width="120" height="40" class="chart" />
  <text x="210" y="595" class="text">Gráfico de Barras</text>
  
  <!-- Chart 2 -->
  <rect x="300" y="570" width="120" height="40" class="chart" />
  <text x="360" y="595" class="text">Gráfico de Pizza</text>
  
  <!-- Chart 3 -->
  <rect x="450" y="570" width="120" height="40" class="chart" />
  <text x="510" y="595" class="text">Gráfico de Linha</text>
  
  <!-- Chart 4 -->
  <rect x="600" y="570" width="120" height="40" class="chart" />
  <text x="660" y="595" class="text">Cards Estatísticos</text>
  
  <!-- Dashboard Final -->
  <rect x="430" y="650" width="140" height="40" class="box" />
  <text x="500" y="675" class="text">Dashboard Interativo</text>
  
  <!-- Setas principais -->
  <line x1="500" y1="95" x2="500" y2="120" class="arrow" />
  <line x1="500" y1="160" x2="500" y2="200" class="arrow" />
  
  <!-- Setas para queries -->
  <line x1="450" y1="200" x2="175" y2="230" class="arrow" />
  <line x1="480" y1="200" x2="355" y2="230" class="arrow" />
  <line x1="520" y1="200" x2="535" y2="230" class="arrow" />
  <line x1="550" y1="200" x2="715" y2="230" class="arrow" />
  
  <!-- Convergência -->
  <line x1="175" y1="280" x2="460" y2="320" class="arrow" />
  <line x1="355" y1="280" x2="480" y2="320" class="arrow" />
  <line x1="535" y1="280" x2="520" y2="320" class="arrow" />
  <line x1="715" y1="280" x2="540" y2="320" class="arrow" />
  
  <!-- Fluxo principal -->
  <line x1="500" y1="360" x2="500" y2="390" class="arrow" />
  <line x1="500" y1="430" x2="500" y2="460" class="arrow" />
  <line x1="500" y1="500" x2="500" y2="540" class="arrow" />
  
  <!-- Setas para charts -->
  <line x1="450" y1="540" x2="210" y2="570" class="arrow" />
  <line x1="480" y1="540" x2="360" y2="570" class="arrow" />
  <line x1="520" y1="540" x2="510" y2="570" class="arrow" />
  <line x1="550" y1="540" x2="660" y2="570" class="arrow" />
  
  <!-- Convergência final -->
  <line x1="210" y1="610" x2="460" y2="650" class="arrow" />
  <line x1="360" y1="610" x2="480" y2="650" class="arrow" />
  <line x1="510" y1="610" x2="520" y2="650" class="arrow" />
  <line x1="660" y1="610" x2="540" y2="650" class="arrow" />
  
  <!-- Detalhes técnicos lado esquerdo -->
  <text x="50" y="100" class="text" style="font-size: 12px; font-weight: bold;">Consultas SQL:</text>
  <text x="50" y="120" class="text" style="font-size: 9px;">SELECT MONTH(data_atendimento) as mes,</text>
  <text x="50" y="135" class="text" style="font-size: 9px;">COUNT(*) as total</text>
  <text x="50" y="150" class="text" style="font-size: 9px;">FROM encaminhamentos</text>
  <text x="50" y="165" class="text" style="font-size: 9px;">WHERE data_atendimento IS NOT NULL</text>
  <text x="50" y="180" class="text" style="font-size: 9px;">GROUP BY MONTH(data_atendimento)</text>
  
  <!-- Métricas calculadas -->
  <text x="50" y="350" class="text" style="font-size: 12px; font-weight: bold;">Métricas Calculadas:</text>
  <text x="50" y="370" class="text" style="font-size: 9px;">• Total de exames por mês</text>
  <text x="50" y="385" class="text" style="font-size: 9px;">• Distribuição por tipo</text>
  <text x="50" y="400" class="text" style="font-size: 9px;">• Ranking de empresas</text>
  <text x="50" y="415" class="text" style="font-size: 9px;">• Tendências temporais</text>
  <text x="50" y="430" class="text" style="font-size: 9px;">• Médias e percentuais</text>
  
  <!-- Tecnologias lado direito -->
  <text x="850" y="100" class="text" style="font-size: 12px; font-weight: bold;">Tecnologias:</text>
  <text x="850" y="120" class="text" style="font-size: 9px;">• Laravel Eloquent ORM</text>
  <text x="850" y="135" class="text" style="font-size: 9px;">• PostgreSQL Agregações</text>
  <text x="850" y="150" class="text" style="font-size: 9px;">• Chart.js Library</text>
  <text x="850" y="165" class="text" style="font-size: 9px;">• Bootstrap 5 Grid</text>
  <text x="850" y="180" class="text" style="font-size: 9px;">• JavaScript ES6+</text>
  
  <text x="850" y="220" class="text" style="font-size: 12px; font-weight: bold;">Tipos de Gráficos:</text>
  <text x="850" y="240" class="text" style="font-size: 9px;">• Bar Chart (Exames Mensais)</text>
  <text x="850" y="255" class="text" style="font-size: 9px;">• Pie Chart (Tipos de Exame)</text>
  <text x="850" y="270" class="text" style="font-size: 9px;">• Line Chart (Tendências)</text>
  <text x="850" y="285" class="text" style="font-size: 9px;">• Cards (KPIs)</text>
  
  <text x="850" y="320" class="text" style="font-size: 12px; font-weight: bold;">Interatividade:</text>
  <text x="850" y="340" class="text" style="font-size: 9px;">• Hover tooltips</text>
  <text x="850" y="355" class="text" style="font-size: 9px;">• Click events</text>
  <text x="850" y="370" class="text" style="font-size: 9px;">• Responsive design</text>
  <text x="850" y="385" class="text" style="font-size: 9px;">• Real-time updates</text>
  
  <text x="850" y="420" class="text" style="font-size: 12px; font-weight: bold;">Performance:</text>
  <text x="850" y="440" class="text" style="font-size: 9px;">• Consultas otimizadas</text>
  <text x="850" y="455" class="text" style="font-size: 9px;">• Cache de resultados</text>
  <text x="850" y="470" class="text" style="font-size: 9px;">• Lazy loading</text>
  <text x="850" y="485" class="text" style="font-size: 9px;">• Índices no banco</text>
  
  <!-- Dados de exemplo -->
  <text x="50" y="500" class="text" style="font-size: 12px; font-weight: bold;">Dados Processados:</text>
  <text x="50" y="520" class="text" style="font-size: 9px;">• 63 encaminhamentos ativos</text>
  <text x="50" y="535" class="text" style="font-size: 9px;">• Distribuição 2025: Jan-Dez</text>
  <text x="50" y="550" class="text" style="font-size: 9px;">• Pico em Julho: 189 exames</text>
  <text x="50" y="565" class="text" style="font-size: 9px;">• Média mensal: 120 exames</text>
  
</svg>